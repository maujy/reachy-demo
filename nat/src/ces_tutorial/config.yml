general:
  front_end:
    _type: fastapi

functions:
   wikipedia_search:
      _type: wiki_search
      max_results: 2
      
   router:
      _type: router
      route_config:
        - name: other
          description: Any question that requires careful thought, outside information, image understanding, or tool calling to take actions.
        - name: chit_chat
          description: Any simple chit chat, small talk, or casual conversation.
        - name: image_understanding
          description: A question that requires the assistant to see the user eg a question about their appearance, environment, scene or surroundings. Examples what am I holding, what am I wearing, what do I look like, what is in my surroundings, what does it say on the whiteboard. Questions about attire eg what color is my shirt/hat/jacket/etc
      llm_name: routing_llm

   react_agent:
      _type: react_agent
      llm_name: agent_llm
      verbose: true
      parse_agent_response_max_retries: 3
      tool_names: [wikipedia_search]

llms:
   # Routing: VLM on GPU (port 8000) - reusing VLM for intent classification
   # Note: VLM follows instructions well for routing; Phi-3-mini doesn't work on GB10
   routing_llm:
      _type: nim
      base_url: http://localhost:8000/v1
      model_name: nvidia/NVIDIA-Nemotron-Nano-12B-v2-VL-NVFP4-QAD
      temperature: 0.0
      api_key: "not-needed"

   # Agent: Nemotron 3 Nano 30B via llama.cpp (port 8081) - for complex reasoning/tools
   # Note: Using llama.cpp with GGUF for GB10 compatibility (vLLM MoE kernels don't compile)
   agent_llm:
      _type: nim
      base_url: http://localhost:8081/v1
      model_name: nemotron
      temperature: 0.0
      api_key: "not-needed"

   # Chitchat: Nemotron 3 Nano 30B via llama.cpp (port 8081) - for casual conversation
   chitchat_llm:
      _type: nim
      base_url: http://localhost:8081/v1
      model_name: nemotron
      temperature: 0.0
      api_key: "not-needed"

   # Vision: Nemotron VL 12B on GPU (port 8000) - for image understanding
   image_llm:
      _type: nim
      base_url: http://localhost:8000/v1
      model_name: nvidia/NVIDIA-Nemotron-Nano-12B-v2-VL-NVFP4-QAD
      temperature: 0.0
      api_key: "not-needed"

workflow:
   _type: ces_tutorial_router_agent
   agent: react_agent
   router: router 
   chitchat_llm: chitchat_llm
   image_llm: image_llm
